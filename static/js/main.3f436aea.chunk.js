(this["webpackJsonpgeops-routing-demo"]=this["webpackJsonpgeops-routing-demo"]||[]).push([[0],{364:function(e,t,n){e.exports=n(596)},591:function(e,t,n){},593:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){"use strict";n.r(t);n(365),n(374),n(564);var a=n(0),r=n.n(a),o=n(32),c=n.n(o),i=n(52),l=n(79),u=n(135),s=n(325),d=n(137),p={currentMot:"bus",currentStops:["",""],currentStopsGeoJSON:{},clickLocation:null,notificationMessage:"",notificationType:"info",isFieldFocused:!1},m=function(e,t){var n={currentStops:t.currentStops};return Object(d.a)({},e,{},n)},f=function(e,t){var n={currentStopsGeoJSON:t.currentStopsGeoJSON};return Object(d.a)({},e,{},n)},h=function(e,t){var n={currentMot:t.currentMot};return Object(d.a)({},e,{},n)},S=function(e,t){var n={clickLocation:t.clickLocation};return Object(d.a)({},e,{},n)},b=function(e,t){var n={notificationMessage:t.notificationMessage,notificationType:t.notificationType};return Object(d.a)({},e,{},n)},v=function(e,t){var n={isFieldFocused:t.isFieldFocused};return Object(d.a)({},e,{},n)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_STOPS":return m(e,t);case"SET_CURRENT_STOPS_GEOJSON":return f(e,t);case"SET_CURRENT_MOT":return h(e,t);case"SET_CLICK_LOCATION":return S(e,t);case"SHOW_NOTIFICATION":return b(e,t);case"SET_IS_FIELD_FOCUSED":return v(e,t);default:return e}},y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,E=Object(u.c)({MapReducer:g}),O=Object(u.e)(E,y(Object(u.a)(s.a))),k=n(143),w=n(101),C=n(187),j=n(188),R=n(205),N=n(653),F=n(336),T=n(14),P=n(652),_=n(108),x=n(326),M=n.n(x),V=n(109),A=n.n(V),I=n(207),G=n(657),H=n(323),z=n(204),U=n(241),L=n.n(U),J=n(660),D=n(642),W=n(638),q=n(658),Z=n(655),K=n(649),B=n(664),X=n(650),$=n(654),Q=n(648),Y=n(208),ee=n(651),te=n(190),ne=n.n(te),ae=function(e){return{type:"SET_CURRENT_STOPS",currentStops:e}},re=function(e){return{type:"SET_CURRENT_STOPS_GEOJSON",currentStopsGeoJSON:e}},oe=function(e){return{type:"SET_CURRENT_MOT",currentMot:e}},ce=function(e,t){return{type:"SHOW_NOTIFICATION",notificationMessage:e,notificationType:t}},ie=function(e){return{type:"SET_IS_FIELD_FOCUSED",isFieldFocused:e}},le=(n(591),["rail","bus","foot"]),ue=["tram","subway","gondola","funicular","ferry","car"],se=[].concat(le,ue),de=["foot","car"],pe=n(329),me=n.n(pe),fe=n(327),he=n.n(fe),Se=n(328),be=n.n(Se),ve=function(e){var t=null,n=e.charAt(0).toUpperCase()+e.slice(1);switch(e){case"rail":t=r.a.createElement(he.a,null);break;case"foot":t=r.a.createElement(be.a,null);break;default:t=r.a.createElement(me.a,null)}return r.a.createElement("span",{title:n},t)},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Object(T.m)(e,"EPSG:3857","EPSG:4326").map((function(e){return e.toFixed(t)}))},ye=n(639),Ee=n(597),Oe=n(641),ke=n(640),we=n(242),Ce=n.n(we);function je(e){var t=e.currentSearchResults,n=e.processClickedResultHandler;return 0===t.length?null:r.a.createElement(W.a,{square:!0,elevation:3},r.a.createElement(ye.a,{component:"nav","aria-label":"search results"},t.map((function(e,t){return 0!==t?r.a.createElement(Ee.a,{onClick:function(){n(e)},button:!0,key:ne()()},r.a.createElement(ke.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(Oe.a,{primary:e.properties.name,secondary:"".concat(e.properties.code," - ").concat(e.properties.country_code)})):r.a.createElement(Ee.a,{onClick:function(){return n(e)},button:!0,selected:!0,key:"searchResult-".concat(e.properties.name)},r.a.createElement(ke.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(Oe.a,{primary:e.properties.name,secondary:"".concat(e.properties.code," - ").concat(e.properties.country_code)}))}))))}je.defaultProps={currentSearchResults:[]};var Re=je,Ne=n(645),Fe=n(662),Te=n(644),Pe=n(663),_e=n(334),xe=n.n(_e),Me=n(332),Ve=n.n(Me),Ae=n(243),Ie=n.n(Ae),Ge=n(335),He=n.n(Ge),ze=n(331),Ue=n.n(ze),Le=n(333),Je=n.n(Le),De=n(9),We=n.n(De),qe=We.a.arrayOf(We.a.number.isRequired).isRequired,Ze=We.a.shape({coordinates:qe,type:We.a.string.isRequired}),Ke=We.a.shape({geometry:Ze,properties:We.a.shape({id:We.a.oneOfType([We.a.string.isRequired,We.a.string.isRequired]),type:We.a.string.isRequired}),type:We.a.string.isRequired}),Be=We.a.shape({features:We.a.shape({0:We.a.oneOfType([Ke,qe]),1:We.a.oneOfType([Ke,qe])}),type:We.a.string.isRequired}),Xe=(We.a.shape({0:Be,1:Be}),We.a.arrayOf(We.a.oneOfType([We.a.string.isRequired,qe])),Object(D.a)((function(){return{gridContainer:{width:"100%",padding:"0px 0px 0px 20px",boxSizing:"unset"},button:{color:"black"},fieldWrapper:{maxWidth:"75%"},buttonWrapper:{maxWidth:"26px"}}})));function $e(e){var t,n=Xe(),a=Object(l.c)(),o=e.index,c=e.addNewSearchFieldHandler,i=e.currentStops,u=e.removeSearchFieldHandler,s=e.searchStopsHandler,d=e.singleStop,p=e.processHighlightedResultSelectHandler,m=e.onFieldFocusHandler,f=e.onZoomRouteClick,h=e.isActiveRoute,S=e.onPanViaClick,b=null,v=10,g="",y=null;return 0===o?(b=r.a.createElement(Pe.a,{title:"Pan to the feature"},r.a.createElement(Te.a,{onClick:function(){return S(d,o)},className:n.button,"aria-label":"Pan to the feature",size:"small"},r.a.createElement(Ue.a,{fontSize:"small",color:"primary"}))),g="Start",y=r.a.createElement(Ne.a,{item:!0,xs:1,className:n.buttonWrapper},r.a.createElement(Pe.a,{title:"Add Hop"},r.a.createElement(Te.a,{onClick:function(){return c(o+1)},className:n.button,"aria-label":"Add Hop",size:"small"},r.a.createElement(Ie.a,{fontSize:"small"}))))):o===i.length-1?(b=r.a.createElement(Pe.a,{title:"Pan to the feature"},r.a.createElement(Te.a,{onClick:function(){return S(d,o)},className:n.button,"aria-label":"Pan to the feature",size:"small"},r.a.createElement(Ve.a,{color:"primary"}))),g="End",y=r.a.createElement(Ne.a,{item:!0,xs:1,className:n.buttonWrapper},r.a.createElement(Pe.a,{title:"Zoom the feature"},r.a.createElement(Te.a,{onClick:function(){return f()},disabled:!h,className:n.button,"aria-label":"Zoom the feature",size:"small"},r.a.createElement(Je.a,{fontSize:"small"}))))):(b=r.a.createElement(xe.a,{fontSize:"small",color:"primary"}),v=9,g="Hop",y=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{item:!0,xs:1,className:n.buttonWrapper},r.a.createElement(Pe.a,{title:"Add Hop"},r.a.createElement(Te.a,{onClick:function(){return c(o+1)},className:n.button,"aria-label":"addHop",size:"small"},r.a.createElement(Ie.a,{fontSize:"small"})))),r.a.createElement(Ne.a,{item:!0,xs:1,className:n.buttonWrapper},r.a.createElement(Pe.a,{title:"Remove Hop"},r.a.createElement(Te.a,{onClick:function(){return u(o)},className:n.button,"aria-label":"removeHop",size:"small"},r.a.createElement(He.a,{fontSize:"small"})))))),r.a.createElement(Ne.a,{container:!0,spacing:1,className:n.gridContainer,alignItems:"flex-end"},r.a.createElement(Ne.a,{item:!0,xs:1},b),r.a.createElement(Ne.a,{item:!0,xs:v,className:n.fieldWrapper},r.a.createElement(Fe.a,{style:{width:"100%"},label:g,color:"primary",onChange:function(e){return s(e,o)},value:(t=d,Array.isArray(t)?ge(t):t),onKeyDown:p,onFocus:function(){a(ie(!0)),m(o)},onBlur:function(){return setTimeout((function(){a(ie(!1))}),500)},onClick:function(e){e.target.select&&e.target.select()}})),y)}$e.defaultProps={currentStops:[],singleStop:""};var Qe=$e;function Ye(e){var t=e.children,n=e.value,a=e.index;return r.a.createElement(Y.a,{component:"div",role:"tabpanel",hidden:n!==a,id:ne()(),"aria-labelledby":"simple-tab-".concat(a)},n===a&&t)}var et=Object(D.a)((function(){return{tabs:{width:"75%"},tab:{minWidth:"33%",width:"33%"},dropDown:{width:"25%",backgroundColor:"white"},dropDownSelected:{width:"25%",backgroundColor:"lightgrey"},checkbox:{padding:"20px 23px"}}})),tt=new AbortController;function nt(e){var t=e.mots,n=e.stationSearchUrl,o=e.APIKey,c=e.isActiveRoute,u=e.onZoomRouteClick,s=e.onPanViaClick,d=et(),p=Object(l.c)(),m=function(e,t){var n=[];return e.filter((function(e){return t.includes(e)})).forEach((function(e){var a=t.find((function(t){return t===e}));a&&n.push({name:a,icon:ve(a)})})),0===n.length&&n.push({name:se[0],icon:ve(se[0])}),n},f=m(t,le),h=m(t,ue),S=Object(l.d)((function(e){return e.MapReducer.clickLocation})),b=Object(l.d)((function(e){return e.MapReducer.currentStops})),v=Object(l.d)((function(e){return e.MapReducer.currentStopsGeoJSON})),g=Object(a.useState)(f),y=Object(i.a)(g,1)[0],E=Object(a.useState)(f[0].name),O=Object(i.a)(E,2),k=O[0],w=O[1],C=Object(a.useState)(h),j=Object(i.a)(C,1)[0],R=Object(a.useState)([]),N=Object(i.a)(R,2),F=N[0],P=N[1],_=r.a.useState(!0),x=Object(i.a)(_,2),M=x[0],V=x[1],I=Object(a.useState)(0),G=Object(i.a)(I,2),H=G[0],z=G[1],U=Object(a.useState)(!1),L=Object(i.a)(U,2),J=L[0],D=L[1],Y=Object(a.useState)(void 0),te=Object(i.a)(Y,2),ne=te[0],de=te[1];Object(a.useEffect)((function(){p(oe(y[0].name))}),[]);var pe=function(e,t,n){p(ae(e)),p(re(t)),z(n)},me=function(e,t){var n=A.a.clone(v),a={type:"FeatureCollection",features:[{type:"Feature",properties:{id:S.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:S}}]};n[H]=a,pe(e,n,t),p(re(n))};Object(a.useEffect)((function(){if(S)if(""===b[H]){b[H]=S,me(b,H+1<b.length?H+1:H)}else{var e=b,t=H;e[H]=S,me(e,H);var n=A.a.clone(v),a={type:"FeatureCollection",features:[{type:"Feature",properties:{id:S.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:S}}]};n[H]=a,pe(e,n,t),p(re(n))}}),[S]);var fe=function(e,t){w(t),p(oe(t))},he=function(e){z(e),p(ie(!0))},Se=function(e){var t=b;t.splice(e,0,""),p(ae(t))},be=function(e){var t=b;t.splice(e,1);var n={};Object.keys(v).forEach((function(t){t!==e.toString()&&(n[t]=v[t])})),p(ae(t)),p(re(n))},ge=function(e,t){if(!e.target.value){var a=b;return a[t]="",P([]),p(ae(a)),void D(!1)}var r=A.a.clone(b);r[t]=e.target.value,p(ae(r)),D(!0),tt.abort();var c=(tt=new AbortController).signal,i="".concat(n,"?q=").concat(e.target.value,"&key=").concat(o,"&mots=").concat(M?k:"");fetch(i,{signal:c}).then((function(e){return e.json()})).then((function(e){var t=[];e.features.forEach((function(e){e.properties.mot[k]&&t.push(e)})),0!==e.features.length&&0!==t.length||p(ce("Couldn't find stations","warning")),P(t),D(!1)})).catch((function(e){if("AbortError"!==e.name)throw e;console.warn("Abort ".concat(i))}))},ye=function(e){var t=Object(i.a)(F,1)[0];if("Enter"===e.key&&t){var n=b;pe[H]=t.properties.name;var a=A.a.clone(v);a[H]=t,p(ae(n)),P([]),p(re(a))}if("Backspace"===e.key){var r=[];e.target.value&&(r=F);var o={};Object.keys(v).forEach((function(e){e!==H.toString()&&(o[e]=v[e])})),P(r),p(re(o))}};return u&&s?r.a.createElement("div",{className:"rd-routing-menu"},r.a.createElement(W.a,{square:!0,elevation:3},r.a.createElement("div",{className:"rd-routing-menu-header"},r.a.createElement(Z.a,{value:!!le.includes(k)&&k,className:d.tabs,onChange:function(e,t){fe(0,t)},indicatorColor:"primary",textColor:"primary","aria-label":"mots icons"},y.map((function(e){return r.a.createElement(K.a,{className:d.tab,key:"mot-".concat(e.name),value:e.name,icon:e.icon,"aria-label":e.name})}))),r.a.createElement(Q.a,{className:k===ne?d.dropDownSelected:d.dropDown},r.a.createElement(B.a,{id:"rd-other-mot-label"},"Other MOTs"),r.a.createElement($.a,{labelId:"rd-other-mot-label",value:ne,onChange:function(e){if(e){var t=e.target.value;fe(0,t),de(t)}else de(void 0)}},j.map((function(e){return r.a.createElement(X.a,{value:e.name,key:"other-mot-".concat(e.name)},e.name)}))))),r.a.createElement(Ye,null,b.map((function(e,t){return r.a.createElement(Qe,{key:"searchField-".concat(t),index:t,addNewSearchFieldHandler:Se,currentStops:b,removeSearchFieldHandler:be,searchStopsHandler:ge,singleStop:e,processHighlightedResultSelectHandler:ye,onFieldFocusHandler:he,onZoomRouteClick:u,onPanViaClick:s,isActiveRoute:c})})),r.a.createElement("div",{className:"rd-mot-checkbox"},r.a.createElement(q.a,{className:d.checkbox,checked:M,onChange:function(){return V(!M)},color:"primary",inputProps:{"aria-label":"use only mot"}}),r.a.createElement("span",null,"Search only selected mode of transport"))),J?r.a.createElement(ee.a,null):null),r.a.createElement(Re,{currentSearchResults:F,processClickedResultHandler:function(e){var t=b;t[H]=e.properties.name;var n=A.a.clone(v);n[H]=e,p(ae(t)),P([]),Object.keys(n).forEach((function(e){var t;e===H.toString()&&(n[e].geometry.coordinates=(t=n[e].geometry.coordinates,Object(T.m)(t,"EPSG:4326","EPSG:3857")))})),p(re(n))}})):null}Ye.defaultProps={value:null,index:null},nt.defaultProps={onZoomRouteClick:void 0,onPanViaClick:void 0};var at=nt,rt=n(244),ot=n(169),ct=n(245),it=n(206),lt=[new rt.b({stroke:new ot.a({color:"black",lineDash:[10,10],width:5})}),new rt.b({stroke:new ot.a({color:"red",lineDash:[10,10],width:3})})],ut=[new rt.b({stroke:new ot.a({color:"black",width:5})}),new rt.b({stroke:new ot.a({color:"yellow",width:3})})],st=[new rt.b({stroke:new ot.a({color:"rgb(173, 216, 230)",width:3})})],dt=[new rt.b({stroke:new ot.a({color:"black",lineDash:[.5,10],width:5})})],pt=[new rt.b({stroke:new ot.a({color:"black",width:5})}),new rt.b({stroke:new ot.a({color:"blue",width:3})})],mt=new rt.b({image:new ct.a({radius:7,fill:new it.a({color:"red"}),stroke:new ot.a({color:"black",width:2})})}),ft=new rt.b({image:new ct.a({radius:7,fill:new it.a({color:"rgb(173, 216, 230)"})})}),ht=new rt.b({image:new ct.a({radius:7,fill:new it.a({color:"black"})})}),St=new rt.b({image:new ct.a({radius:7,fill:new it.a({color:"yellow"}),stroke:new ot.a({color:"black",width:2})})}),bt=new rt.b({image:new ct.a({radius:7,fill:new it.a({color:"blue"}),stroke:new ot.a({color:"black",width:2})})}),vt=(n(593),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(j.a)(t).call(this,e))).drawNewRoute=function(){n.findRouteCancel&&n.findRouteCancel();var e=[],t=n.props,a=t.currentStopsGeoJSON,r=t.routingUrl,o=t.currentMot,c=t.APIKey,i=t.onShowNotification;Object.keys(a).forEach((function(t){a[t].features?e.push("".concat(ge(a[t].features[0].geometry.coordinates).slice().reverse())):e.push("!".concat(a[t].properties.name))})),L.a.get(r,{params:{via:e.join("|"),mot:o,key:c,srs:"3857"},cancelToken:new n.FindRouteCancelToken((function(e){n.findRouteCancel=e}))}).then((function(e){n.routeVectorSource.clear();var t=de.includes(o)?new I.a({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}):new I.a;n.routeVectorSource.addFeatures(t.readFeatures(e.data)),n.setIsActiveRoute(!!n.routeVectorSource.getFeatures().length),n.routeVectorSource.getFeatures().forEach((function(e){return e.setStyle("rail"===(t=o)?lt:"bus"===t?ut:"foot"===t?st:"car"===t?dt:pt);var t}))}),(function(e){e&&i("Couldn't find route","error")}))},n.FindRouteCancelToken=L.a.CancelToken,n.findRouteCancel=null,n.hoveredFeature=null,n.state={hoveredStationOpen:!1,hoveredStationName:"",isActiveRoute:!1},n}return Object(R.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.APIKey,a=t.onSetClickLocation,r=[949042.143189,5899715.591163];this.markerVectorSource=new G.a({}),this.markerVectorLayer=new P.a({zIndex:1,source:this.markerVectorSource}),this.routeVectorSource=new G.a({}),this.routeVectorLayer=new P.a({zIndex:0,source:this.routeVectorSource});var o=new H.a({layers:[this.markerVectorLayer]});o.on("translateend",(function(t){var n,a=e.props,r=a.currentStops,o=a.currentStopsGeoJSON,c=a.onSetCurrentStops,i=a.onSetCurrentStopsGeoJSON,l=A.a.clone(r),u=A.a.clone(o),s=t.features.getArray()[0].getProperties(),d=s.name,p=s.id;l[n=d?r.indexOf(d):function(e,t){for(var n=0;n<e.length;n+=1)if(e[n][0]===t[0]&&e[n][1]===t[1])return n;return-1}(r,p.slice().reverse())]=t.coordinate,u[n]={type:"FeatureCollection",features:[{type:"Feature",properties:{id:t.coordinate.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:t.coordinate}}]},c(l),i(u)})),this.map=new N.a({target:"map",interactions:Object(z.a)().extend([o]),view:new F.a({projection:"EPSG:3857",center:r,zoom:6})});var c=new M.a.Map({style:"https://maps.geops.io/styles/travic/style.json?key=".concat(n),attributionControl:!1,boxZoom:!1,center:Object(T.j)(r),container:this.map.getTargetElement(),doubleClickZoom:!1,dragPan:!1,dragRotate:!1,interactive:!1,keyboard:!1,pitchWithRotate:!1,scrollZoom:!1,touchZoomRotate:!1}),i=new _.a({render:function(e){var t=c.getCanvas(),n=e.viewState,a=i.getVisible();t.style.display=a?"block":"none";var r=i.getOpacity();t.style.opacity=r;var o=n.rotation;return o&&c.rotateTo(180*-o/Math.PI,{animate:!1}),c.jumpTo({center:Object(T.j)(n.center),zoom:n.zoom-1,animate:!1}),c._frame&&(c._frame.cancel(),c._frame=null),c._render(),t}});[i,this.markerVectorLayer,this.routeVectorLayer].forEach((function(t){return e.map.addLayer(t)})),this.onZoomRouteClick=function(){var t;e.routeVectorSource.getFeatures().length&&(t=e.routeVectorSource.getExtent()),4===t.filter((function(e){return Number.isFinite(e)})).length&&e.map.getView().fit(e.routeVectorSource.getExtent(),{size:e.map.getSize(),duration:500,padding:[200,200,200,200]})},this.onPanViaClick=function(t,n){var a=e.props.currentStopsGeoJSON;if(a&&a[n]){var r=a[n].features?a[n].features[0].geometry.coordinates:a[n].geometry.coordinates;e.map.getView().animate({center:r,duration:500,padding:[100,100,100,100]})}},this.map.on("singleclick",(function(t){var n=e.props,r=n.isFieldFocused,o=n.currentStopsGeoJSON;o[0]&&o[1]&&!r||a(t.coordinate)})),this.map.on("pointermove",(function(t){e.hoveredFeature&&(e.hoveredFeature=null,e.setState({hoveredStationOpen:!1,hoveredStationName:""})),e.map.forEachFeatureAtPixel(t.pixel,(function(t){if("Point"===t.getGeometry().getType()){e.hoveredFeature=t;var n="";n=t.get("name")?"".concat(t.get("name")," - ").concat(t.get("country_code")):"".concat(t.get("id")[0],", ").concat(t.get("id")[1]),e.setState({hoveredStationOpen:!0,hoveredStationName:n})}return!0}))}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.currentStopsGeoJSON,r=n.currentMot,o=r&&r!==e.currentMot,c=a&&a!==e.currentStopsGeoJSON;(o||c)&&(this.markerVectorSource.clear(),Object.keys(a).forEach((function(e){t.markerVectorSource.addFeatures((new I.a).readFeatures(a[e])),t.markerVectorSource.getFeatures().forEach((function(e){return e.setStyle("rail"===(t=r)?mt:"bus"===t?St:"foot"===t?ft:"car"===t?ht:bt);var t}));var n=t.markerVectorSource.getFeatures()[0].getGeometry().getCoordinates();t.map.getView().animate({center:n,duration:500})})),this.routeVectorSource.clear(),this.setIsActiveRoute(!1),Object.keys(a).length>1&&this.drawNewRoute())}},{key:"setIsActiveRoute",value:function(e){this.setState({isActiveRoute:e})}},{key:"render",value:function(){var e=this.props,t=e.mots,n=e.APIKey,a=e.stationSearchUrl,o=this.state,c=o.isActiveRoute,i=o.hoveredStationOpen,l=o.hoveredStationName;return r.a.createElement(r.a.Fragment,null,r.a.createElement(at,{mots:t,stationSearchUrl:a,isActiveRoute:c,onZoomRouteClick:this.onZoomRouteClick,onPanViaClick:this.onPanViaClick,APIKey:n}),r.a.createElement(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:i,message:l}),r.a.createElement("div",{id:"map",className:"MapComponent"}))}}]),t}(a.Component));vt.getExtentCenter=function(e){return[e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2]};var gt=Object(l.b)((function(e){return{currentMot:e.MapReducer.currentMot,currentStops:e.MapReducer.currentStops,currentStopsGeoJSON:e.MapReducer.currentStopsGeoJSON,isFieldFocused:e.MapReducer.isFieldFocused}}),(function(e){return{onSetCurrentStops:function(t){return e(ae(t))},onSetCurrentStopsGeoJSON:function(t){return e(re(t))},onSetClickLocation:function(t){return e(function(e){return{type:"SET_CLICK_LOCATION",clickLocation:e}}(t))},onShowNotification:function(t,n){return e(ce(t,n))}}}))(vt),yt=n(656),Et=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(j.a)(t).call(this,e))).handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(R.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.notificationMessage;t&&t!==e.notificationMessage&&this.handleOpen()}},{key:"render",value:function(){var e=this.props,t=e.notificationMessage,n=e.notificationType,a=this.state.open;return r.a.createElement(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(yt.a,{onClose:this.handleClose,severity:n,elevation:6,variant:"filled"},t))}}]),t}(r.a.Component),Ot=Object(l.b)((function(e){return{notificationMessage:e.MapReducer.notificationMessage,notificationType:e.MapReducer.notificationType}}))(Et),kt={mots:se,routingUrl:"https://api.geops.io/routing/dev/",stationSearchUrl:"https://api.geops.io/stops/dev/"};function wt(e){var t=e.mots,n=e.routingUrl,o=e.stationSearchUrl,c=Object(a.useState)(null),u=Object(i.a)(c,2),s=u[0],d=u[1];return Object(a.useEffect)((function(){fetch("https://developer.geops.io/publickey").then((function(e){return e.json()})).then((function(e){d(e.key)})).catch((function(){console.error("Request to get the apiKey failed")}))}),[]),s?r.a.createElement(l.a,{store:O},r.a.createElement(gt,{mots:t,routingUrl:n,APIKey:s,stationSearchUrl:o}),r.a.createElement(Ot,null)):null}wt.defaultProps=kt;var Ct=wt;n(595),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ct,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[364,1,2]]]);
//# sourceMappingURL=main.3f436aea.chunk.js.map