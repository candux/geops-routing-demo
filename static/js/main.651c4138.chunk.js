(this["webpackJsonpgeops-routing-demo"]=this["webpackJsonpgeops-routing-demo"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),l=(a(79),a(28)),s=a(17),i=a(33),u=a(34),m=a(38),h=a(39),p=a.n(h),d=(a(80),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e="".concat("geops-routing-demo"," ").concat("0.1.5"),t=p.a.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:e+' | Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"});this.map=p.a.map("map",{center:[25,25],zoom:4,zoomControl:!1,layers:[t]}),p.a.control.zoom({position:"topright"}).addTo(this.map)}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",className:"map"})}}]),t}(n.Component)),f=a(2),g=a(142),v=a(149),E=a(143),b=a(141),S=a(147),y=a(146),x=a(40),w=a.n(x),C=a(62),k=a.n(C),F=a(64),R=a.n(F),M=a(63),O=a.n(M),j=a(65),B=a.n(j),I=(a(99),a(144)),z=a(145),D=a(54),H=a.n(D),T=a(55),N=a.n(T),q=a(56),U=a.n(q),J=a(57),K=a.n(J),W=a(58),Z=a.n(W),L=a(59),Y=a.n(L),$=a(60),_=a.n($),A=a(61),G=a.n(A),P=[{name:"bus",icon:r.a.createElement(H.a,null)},{name:"ferry",icon:r.a.createElement(N.a,null)},{name:"gondola",icon:r.a.createElement(U.a,null)},{name:"tram",icon:r.a.createElement(K.a,null)},{name:"rail",icon:r.a.createElement(Z.a,null)},{name:"funicular",icon:r.a.createElement(Y.a,null)},{name:"cable_car",icon:r.a.createElement(_.a,null)},{name:"subway",icon:r.a.createElement(G.a,null)}];function Q(e){var t=e.children,a=e.value,n=e.index,o=Object(f.a)(e,["children","value","index"]);return r.a.createElement(b.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(S.a,{p:3},t))}var V=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).validateMots=function(e){var t=[];return e.forEach((function(e){var a=P.find((function(t){return t.name===e}));a&&t.push(a)})),0===t.length&&t.push(P[0]),t},a.handleMotChange=function(e,t){a.setState({currentMot:t}),console.log(t)},a.onFieldFocus=function(e){a.setState({focusedFieldIndex:e})},a.onFieldBlur=function(){a.setState({focusedFieldIndex:null})},a.searchStops=function(e,t){if(!e.target.value){var n=a.state.currentStops;return n[t]="",void a.setState({currentSearchResults:[],currentStops:n})}var r=a.state.currentStops;r[t]=e.target.value,a.setState({currentStops:r}),a.searchCancel&&a.searchCancel(),w.a.get(a.props.stationSearchUrl,{params:{q:e.target.value,key:"5cc87b12d7c5370001c1d655d0a18192eba64838a5fa1ad7d482ab82"},cancelToken:new a.searchCancelToken((function(e){a.searchCancel=e}))}).then((function(e){var t=[];e.data.features.forEach((function(e){e.properties.mot[a.state.currentMot]&&t.push(e.properties.name)})),a.setState({currentSearchResults:t})}),(function(e){console.log(e)}))},a.processHighlightedResultSelect=function(e){if("Enter"===e.key&&a.state.currentSearchResults[0]){var t=a.state.currentStops;t[a.state.focusedFieldIndex]=a.state.currentSearchResults[0],a.setState({currentStops:t,currentSearchResults:[]})}},a.processRoute=function(){};var n=a.validateMots(e.mots);return a.state={currentMots:n,currentMot:n[0].name,currentSearchResults:[],focusedFieldIndex:null,currentStops:["",""],canSearchForRoute:!1},a.searchCancelToken=w.a.CancelToken,a.searchCancel=null,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"RoutingMenu"},r.a.createElement(g.a,{square:!0,elevation:3},r.a.createElement(v.a,{value:this.state.currentMot,onChange:this.handleMotChange,variant:"scrollable",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example"},this.state.currentMots.map((function(e){return r.a.createElement(E.a,{key:"mot-"+e.name,value:e.name,icon:e.icon,"aria-label":e.name})}))),r.a.createElement(Q,null,r.a.createElement(I.a,{container:!0,spacing:1,alignItems:"flex-end",style:{width:"100%"}},r.a.createElement(I.a,{item:!0,xs:1},r.a.createElement(k.a,{fontSize:"small",color:"secondary"})),r.a.createElement(I.a,{item:!0,xs:10},r.a.createElement(y.a,{style:{width:"100%"},label:"Source",color:"secondary",onChange:function(t){return e.searchStops(t,0)},value:this.state.currentStops[0],onKeyDown:this.processHighlightedResultSelect,onFocus:function(){return e.onFieldFocus(0)},onBlur:this.onFieldBlur})),r.a.createElement(I.a,{item:!0,xs:1},r.a.createElement(z.a,{className:"addHop",color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(O.a,null)))),r.a.createElement(I.a,{container:!0,spacing:1,alignItems:"flex-end",style:{width:"100%"}},r.a.createElement(I.a,{item:!0,xs:1},r.a.createElement(R.a,{color:"secondary"})),r.a.createElement(I.a,{item:!0,xs:10},r.a.createElement(y.a,{style:{width:"100%"},label:"Destination",color:"secondary",onChange:function(t){return e.searchStops(t,1)},value:this.state.currentStops[1],onKeyDown:this.processHighlightedResultSelect,onFocus:function(){return e.onFieldFocus(1)},onBlur:this.onFieldBlur})),r.a.createElement(I.a,{item:!0,xs:1},r.a.createElement(z.a,{disabled:!this.state.canSearchForRoute,className:"addHop",color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(B.a,null)))))),0!==this.state.currentSearchResults.length?r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(g.a,{square:!0,elevation:1},r.a.createElement(Q,null,this.state.currentSearchResults.map((function(e,t){return 0!==t?r.a.createElement(b.a,{key:"searchResult-"+e,variant:"subtitle1",gutterBottom:!0},e):r.a.createElement(b.a,{key:"searchResult-"+e,variant:"h6",gutterBottom:!0},e)}))))):null)}}]),t}(r.a.Component);var X=function(e){return r.a.createElement("div",null,r.a.createElement(V,e),r.a.createElement(d,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=r.a.createElement(X,{mots:["rail","bus","tram"],routingUrl:"https://api.geops.io/routing/v1/",stationSearchUrl:"https://api.geops.io/stops/v1/",key:"5cc87b12d7c5370001c1d655d0a18192eba64838a5fa1ad7d482ab82"});c.a.render(ee,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},74:function(e,t,a){e.exports=a(104)},79:function(e,t,a){},80:function(e,t,a){},99:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.651c4138.chunk.js.map